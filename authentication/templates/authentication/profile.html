{% extends 'base.html' %}

{% block title %}Profile - Event Management{% endblock %}

{% block content %}
<div class="container">
    <h2>User Profile</h2>
    <h4>Personal Information</h4>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>First Name:</strong> {{ user.first_name }}</p>
    <p><strong>Last Name:</strong> {{ user.last_name }}</p>
    <p><strong>Phone Number:</strong> {{ user.phone_number }}</p>
    <p><strong>Date Joined:</strong> {{ user.date_joined }}</p>

    <h4 class="mt-4">Purchased Tickets</h4>
    <div class="row">
        {% for ticket in tickets %}
            <div class="col-md-4 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">{{ ticket.ticket_type.name }}</h5>
                        <p class="card-text">Ticket Code: {{ ticket.unique_ticket_code }}</p>
                        <p><strong>Status:</strong> {{ ticket.status }}</p>
                        <p><strong>Purchased At:</strong> {{ ticket.purchased_at }}</p>
                        <p><strong>QR Code:</strong></p>
                        {% if ticket.qr_code %}
                            <img src="{{ ticket.qr_code.url }}" style="width: 100px; height: 100px;" />
                        {% else %}
                            <p>No QR Code available.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% empty %}
            <p>No tickets purchased yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}